<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head :: head('One Pager')"></head>

<!-- CSS padr√£o do projeto -->
<link rel="stylesheet" th:href="@{/css/layout.css}">
<link rel="stylesheet" th:href="@{/css/forms.css}">

<!-- CSS isolado s√≥ dessa tela -->
<link rel="stylesheet" th:href="@{/css/one-pager-select.css}">

<body>
<div class="container">

    <!-- SIDEBAR -->
    <div th:replace="fragments/sidebar :: sidebar"></div>

    <!-- CONTENT -->
    <div class="content one-pager-select">

        <div class="op-select-header">
            <h2>üìÑ One Pager</h2>
            <p class="subtitle">Select a factory to manage One Pager data</p>
        </div>

        <div class="op-select-card">

            <div class="op-select-row">
                <div class="op-select-icon">üè≠</div>

                <div class="op-select-main">
                    <label class="op-select-label" for="factoryId">Factory</label>

                    <!-- IMPORTANT: action e name batem com o controller /one-pager/manage?factoryId= -->
                    <form method="get" th:action="@{/one-pager/manage}" id="selectFactoryForm">
                        <select id="factoryId" name="factoryId" class="op-select-input" required>
                            <option value="">-- Select Factory --</option>
                            <option th:each="f : ${factories}"
                                    th:value="${f.id}"
                                    th:text="${f.name}">
                            </option>
                        </select>

                        <div class="op-select-actions">
                            <button type="submit" class="btn-primary" id="btnContinue" disabled>
                                Continue ‚Üí
                            </button>

                            <a th:href="@{/}" class="btn-secondary">
                                ‚Üê Back to Dashboard
                            </a>
                        </div>
                    </form>

                    <small class="op-select-help">
                        Tip: choose a factory and click Continue (or just select and it will enable automatically).
                    </small>
                </div>
            </div>

        </div>

    </div>
</div>

<script>
    (function () {
        const select = document.getElementById('factoryId');
        const btn = document.getElementById('btnContinue');

        function refresh() {
            btn.disabled = !(select && select.value);
        }

        if (select) {
            select.addEventListener('change', refresh);
            refresh();
        }
    })();
</script>

</body>
</html>
