<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>One Pager</title>
    <link rel="stylesheet" th:href="@{/css/layout.css}">
    <link rel="stylesheet" th:href="@{/css/one-pager.css}">
</head>

<body>

<div class="container">
    <div th:replace="fragments/sidebar :: sidebar"></div>

    <div class="content one-pager">

        <!-- ================= HEADER ================= -->
        <div class="one-pager-header">
            <h2>
                PRODUCT SUPPLY CHAIN â€“ FOOTWEAR<br>
                <small>
                    <strong th:text="${factory != null ? factory.name : 'Factory'}">
                        Factory
                    </strong>
                </small>
            </h2>

            <a th:href="@{/one-pager}" class="btn-secondary">
                ðŸ”„ Change Factory
            </a>
        </div>

        <!-- ================= GRID ================= -->
        <div class="one-pager-grid">

            <!-- OPERATION KPI + QUALITY METRICS -->
            <div class="pdf-card col-12">
                <div class="kpi-top-grid">

                    <!-- OPERATION KPI -->
                    <div class="kpi-left">
                        <div class="pdf-title">Operation KPI</div>

                        <table class="kpi-table">
                            <tr>
                                <th>Pairs Produced</th>
                                <th>Working Days</th>
                                <th>Workforce Nike</th>
                                <th>PPH</th>
                                <th>DR &lt; 0.15%</th>
                            </tr>
                            <tr>
                                <td th:text="${operationKpi != null ? operationKpi.pairsProduced : 0}">0</td>
                                <td th:text="${operationKpi != null ? operationKpi.workingDays : 0}">0</td>
                                <td th:text="${operationKpi != null ? operationKpi.workforceNike : 0}">0</td>
                                <td th:text="${operationKpi != null ? operationKpi.pph : 0}">0</td>
                                <td th:text="${operationKpi != null ? operationKpi.dr + '%' : '0%'}">0%</td>
                            </tr>
                        </table>
                    </div>

                    <!-- KPI QUALITY METRICS -->
                    <div class="kpi-right">
                        <div class="pdf-title">KPI Quality Metrics</div>

                        <div class="quality-grid">
                            <div class="quality-card">
                                <h4>MPPA</h4>
                                <small>Big Nike Low</small>
                                <img src="/uploads/mppa.png" alt="MPPA Metric">
                            </div>

                            <div class="quality-card">
                                <h4>MQAAs &gt; 97.5%</h4>
                                <small>Assembly</small>
                                <img src="/uploads/mqaa.png" alt="MQAA Metric">
                            </div>

                            <div class="quality-card">
                                <h4>BTP 2.0 â€“ 99%</h4>
                                <small>Daily Bonding Test</small>
                                <img src="/uploads/btp.png" alt="BTP Metric">
                            </div>
                        </div>
                    </div>

                </div>
            </div>

			


			<!-- VOC / WASTE -->
			<div class="pdf-card col-6">
			    <div class="pdf-title">VOC â€“ Last Six Months</div>
			    <canvas id="vocChart"></canvas>
			</div>

			<div class="pdf-card col-6">
			    <div class="pdf-title">Waste â€“ Last Six Months</div>
			    <canvas id="wasteChart"></canvas>
			</div>

			<!-- DR + HFPI (MESMA LINHA, SEM ESPAÃ‡O VAZIO) -->
			
			<div class="pdf-card col-6">
			    <div class="pdf-title">HFPI GROUP &gt; 95%</div>

			    <div class="hfpi-box">
			        <div class="kpi-metric">
			            <span>HFPI Geral</span>
			            <strong class="kpi-green"
			                    th:text="${hfpi != null ? hfpi.hfpiGeral + '%' : '0%'}">
			                0%
			            </strong>
			        </div>

			        <div class="kpi-metric">
			            <span>HFPI FÃ¡brica</span>
			            <strong class="kpi-green"
			                    th:text="${hfpi != null ? hfpi.hfpiFabrica + '%' : '0%'}">
			                0%
			            </strong>
			        </div>

			        <div class="kpi-metric">
			            <span>HFPI Online</span>
			            <strong class="kpi-green"
			                    th:text="${hfpi != null ? hfpi.hfpiOnline + '%' : '0%'}">
			                0%
			            </strong>
			        </div>
			    </div>
			</div>
			<div class="pdf-card col-6">
						    <div class="pdf-title">DR â€“ Top Types</div>
						    <canvas id="drChart"></canvas>
			</div>
			
			


            <!-- EXECUTIVE SUMMARY -->
            <div class="pdf-card col-12">
                <div class="pdf-title">Executive Summary</div>

                <div class="summary-box">
                    <div>
                        <h4>Highlight</h4>
                        <p th:text="${summary != null ? summary.highlight : 'N/A'}">N/A</p>
                    </div>

                    <div>
                        <h4>Key Action</h4>
                        <p th:text="${summary != null ? summary.keyAction : 'N/A'}">N/A</p>
                    </div>

                    <div>
                        <h4>Help Needed</h4>
                        <p th:text="${summary != null ? summary.helpNeeded : 'N/A'}">N/A</p>
                    </div>
                </div>
            </div>

        </div>

        <a th:href="@{/}" class="btn-secondary">
            â¬… Back to Dashboard
        </a>

    </div>
</div>

</body>
</html>
