<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head th:replace="fragments/head :: head('TÃ­tulo')"></head>

	<div class="container">
	    <div th:replace="fragments/sidebar :: sidebar"></div>
	    <div class="content">
			<body>

			<h1>Manufacturing Index</h1>
			<!-- ðŸ”½ SELETOR DE FÃBRICA -->
			<form>
			    <label><strong>Select Factory:</strong></label>

			    <select id="factorySelect"
			            onchange="changeFactory()">

			        <option th:each="f : ${factories}"
			                th:value="${f.id}"
			                th:text="${f.name}"
			                th:selected="${f.id == factory.id}">
			        </option>

			    </select>
			</form>

			<br/>

			<p>
			    Factory:
			    <strong th:text="${factory.name}"></strong>
			</p>

			<table border="1" cellpadding="5">
			    <thead>
			        <tr>
			            <th>FY</th>
			            <th>Quarter</th>
			            <th>Type</th>
			            <th>Value</th>
			            <th>Points</th>
			            <th>Actions</th>
			        </tr>
			    </thead>

			    <tbody>
			        <tr th:each="k : ${kpis}">
			            <td th:text="${k.fy}"></td>
			            <td th:text="${k.quarter}"></td>
			            <td th:text="${k.type}"></td>
			            <td th:text="${#numbers.formatDecimal(k.kpiValue, 1, 2)}"></td>
			            <td th:text="${#numbers.formatDecimal(k.points, 1, 2)}"></td>
			            <td>
			                <a th:href="@{'/kpis/' + ${k.id} + '/edit'}">Edit</a> |
			                <a th:href="@{'/kpis/' + ${k.id} + '/delete'}"
			                   onclick="return confirm('Delete KPI?')">Delete</a>
			            </td>
			        </tr>
			    </tbody>
			</table>

			<br/>

			<a th:href="@{/factories}">â¬… Back to Factories</a>
			<script>
			function changeFactory() {
			    const factoryId = document.getElementById("factorySelect").value;
			    window.location.href = "/kpis/" + factoryId;
			}
			</script>

			</body>
	    </div>
	</div>
</html>


